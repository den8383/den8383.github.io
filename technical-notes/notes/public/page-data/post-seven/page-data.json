{"componentChunkName":"component---src-templates-post-jsx","path":"/post-seven","webpackCompilationHash":"d2d9b8aa81c05af4de5c","result":{"data":{"markdownRemark":{"html":"<h1>なぜやるのか</h1>\n<p>この春からM1になり,そろそろ技術メモを残さないなと思いこの度技術ノートを作成しました.</p>\n<p>どうやって技術ノートを作成するか, 作成する方法の中でも管理が楽なものがないか探していると,</p>\n<p>静的サイトジェネレータでGatsby.jsという</p>\n<p>ものがあったので導入することにしました.</p>\n<p>本記事はGatsby.jsをdocker上で構成しHello world!まで行った時の備忘録です.</p>\n<p>完成後のディレクトリ構成は以下の通りになります.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n├── docker-compose.yml\n├── Dockerfiles/gatsby/Dockerfile\n└── hello-world</code></pre></div>\n<h1>Dockerの前準備</h1>\n<p>まずはdocker-compose.ymlから.</p>\n<p>Dockerfiles/gatsby/Dockerfiles を読み込みます.</p>\n<p>portは8000番を使います</p>\n<div class=\"gatsby-highlight\" data-language=\"yml:docker-compose.yml\"><pre class=\"language-yml:docker-compose.yml\"><code class=\"language-yml:docker-compose.yml\">version: &#39;3&#39;\nservices:\n  webserver:\n    build: ./Dockerfiles/gatsby/\n    ports:\n      - &quot;8000:8000&quot;\n    volumes:\n     - ./:/usr/src/app\n    environment:\n      - NODE_ENV=development\n    tty: true</code></pre></div>\n<p>次にDockerfileです.</p>\n<p>今回はimgesはubuntu 18.04を使いました.\ngitやnode.js, Gatsby.jsをインストールします.</p>\n<p>./Dockerfiles/gatsby/Dockerfile</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile:dockerfile\"><pre class=\"language-dockerfile:dockerfile\"><code class=\"language-dockerfile:dockerfile\">FROM ubuntu:18.04\nEXPOSE 8000\nRUN apt-get update &amp;&amp; apt-get upgrade -y\nRUN apt-get install -y git \nRUN apt-get install -y wget\nRUN apt-get install -y curl \nRUN apt-get install sudo -y\n\nRUN apt install -y nodejs npm\nRUN npm install n -g\nRUN n stable\nRUN apt purge -y nodejs npm\n\nRUN npm install -g gatsby-cli\n\n\nARG DOCKER_UID=1000\nARG DOCKER_USER=docker\nARG DOCKER_PASSWORD=docker\nRUN useradd -m --uid ${DOCKER_UID} --groups sudo ${DOCKER_USER} \\\n  &amp;&amp; echo ${DOCKER_USER}:${DOCKER_PASSWORD} | chpasswd\nUSER ${DOCKER_USER}\n\nWORKDIR /usr/src/app</code></pre></div>\n<p>イメージのbuildとコンテナの立ち上げを行います.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker-compose up --build</code></pre></div>\n<p>以下のコマンドで仮想環境に入ります.</p>\n<p>gatsby-notes<em>webserver</em>1は各環境で添字等が変わるので適時読み替えてください.(大体はTabキーの補完でどうにかなるとは思いますが)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker exec -it gatsby-notes_webserver_1 /bin/bash</code></pre></div>\n<h1>Gatsby.js</h1>\n<p>それではGatsby.jsでHello worldをしていきましょう.</p>\n<p>ここからは公式ドキュメントどおりです.</p>\n<p>公式が用意しているスターターキットを使います.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ gatsby new hello-world https://github.com/gatsbyjs/gatsby-starter-hello-world</code></pre></div>\n<p>しばらく待ち,</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 577px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b3d103fc51930412ffaaec7f5bd7940d/52dc3/gatsby_new_hello.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.51993067590988%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADJUlEQVQ4y4VUu5LTSBSVH3pZUuvZaj1ty7Ll8Xg8QEFtsBkxRJttTEKytd8AKV+wH7ERGVV82+HeO0wBtTOzwS1br9Pn1W0Feo6VtqDSAMMwYL3usT+MGHZb7MYdzUD3N+i6BqtghcvtRd6xLOvhSdYLRK2Futc4XV/j6jRhvx8xHvYC2vcdpuOEuq7kgyAMEMfx44ChmSMoLcR5SAA7nG8I9GpCWWphMk0HeJ4H27aRJDHm8/njYMKwX0B1FnST4fbZcwG83N7ITMeDsE3ShGzYY7cb/h+QGbKHuUlI7glVZbDZrontgDAKcZj2aJpaQFWssFwuhW2WZ/B9/2GG4uFaYxzvwuhJ6vlyJrADSqNpgQ2ev3iGLYXDwAzK4J7n/hcwMjP4xDDVSlIeKdW2bYRh3VTi5ZE8Xa1WAlIUxdOSncCDrzykWSwv5ySFpyhyhJQoyypNKcE8CXQ/CyekfkXIslTqEEURIhUJ6GrlE6An9133Tt5sNnsa0FUWHB7flg+ZTUo+cZp8zYHwf6UULZKj0IUwfxQwTVN4JCsmfxQBJEkCQ6Bd1yIn2RUVOicrSmOgtZbn/Msq4u/va1qEr+9CIYk1seCKLKkOXAmWykx52AqjE9SGQHWGI3WTF+KkHdcRKziwe0ssTu76fKKtVUsQXBkGjGnlvi2hdy8x/fkPDn98wubNR/z2+i3G3fppyUy7qiphyozYQ5ZQlgXVqUIxvkLanxGWI3TdicQwDOUdHmYYkUK2zeLtxRfSMzLetpdSWNdx4NM9j2UtKTSaBTFw7IXI4zq59Izr5FET7kEt9q6hIrN3P1MPgoAWiKQ2SZYhzQuoJMVAuylSsXjIveX3ft0pFMrV6YiWUuUjajts7xIkK9ZdCXP8HZe/vuLm/Wec3v2Ll39/wfbNB1HDx9pEu+iXA6NujGwpTpTLzDUxkrD54eH6GqrcIG1GKLOFbgdo2pKswJpx2X9iWHMYlHBHByl7wP3j/8yYwfn0yVPeOQlsGq+g3tLCIX3nPHQ4OJEFlybJlRSWDwPuGTPg1A0BZrRDmraFS0H45Fnb97AptIdq8w31atzTs/XjMgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby new hello\"\n        title=\"gatsby new hello\"\n        src=\"/static/b3d103fc51930412ffaaec7f5bd7940d/52dc3/gatsby_new_hello.png\"\n        srcset=\"/static/b3d103fc51930412ffaaec7f5bd7940d/f723e/gatsby_new_hello.png 188w,\n/static/b3d103fc51930412ffaaec7f5bd7940d/d744b/gatsby_new_hello.png 375w,\n/static/b3d103fc51930412ffaaec7f5bd7940d/52dc3/gatsby_new_hello.png 577w\"\n        sizes=\"(max-width: 577px) 100vw, 577px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>このように表示されていれば成功のはずです.</p>\n<p>hello-worldというディレクトリができたと思います</p>\n<p>そこに移動して,gatsby develop を行い</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ cd hello-world\n$ gatsby develop --host=0.0.0.0</code></pre></div>\n<p><a href=\"http://localhost:8000/\">http://localhost:8000/</a></p>\n<p>をブラウザで開くとHello wolrd!と表示されているのが確認できるはずです.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/27eb0/gatsby_hello_world.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.20078354554357%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAAWUlEQVQ4y+3OsQ3AIAxEUS9GxSJhzgRIG2CUuLXcmMsMUVAqn/Tbp6MYI0II2FJCLhX7kVHqiat1tDHQ+ruI+QYzQ0Sgqp8jLB6ZGeacy1r/0EEHHXTwF/ABAtnXBaXUDyEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby hello world\"\n        title=\"gatsby hello world\"\n        src=\"/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/26fb4/gatsby_hello_world.png\"\n        srcset=\"/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/f723e/gatsby_hello_world.png 188w,\n/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/d744b/gatsby_hello_world.png 375w,\n/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/26fb4/gatsby_hello_world.png 750w,\n/static/0c0b78c6a5a8ef0605ffa0295d42f0a2/27eb0/gatsby_hello_world.png 1021w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h1>まとめ</h1>\n<p>これで一応Gatsby.jsの環境がdocker上でできあがっていることになると思います.</p>\n<p>ちなみにこのサイトもGatsby.js製です.いつかサイト作成についても記事にしようと思います.</p>\n<p>以上, docker上でGatsby.js環境を構築しHello World!するまででした.</p>","frontmatter":{"date":"2020-04-02","title":"Gatsby.js環境をDocker上で構成する (Gatsby.js on Docker)","tags":["gatsby","react","docker"],"cover":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAC90lEQVQ4y11UuZLTQBDVN6xtWac1umzZZs2SkhAQEFFFUfwHi4+117e9eM26ipivgICMkCoC+KqmX0ujlTfokmam5/Xr191jOGpMSfeOGo0hGaY1Jdu5yReuNyPV/0rt/oGMqL2j7vMHMhzeleM429Pgw1/2Cyek4jWlvc9kNsdUr3/iTf+WcCfITnT58hvVate8Gcwo4WthupENwfHDhWx6rTn5alFsBvnCsieyIZsq3pDLXp3XP+ni4mOOGaZb2ey/+0MImkdnSgiWDY4UhCtJocnUTHMkUHDKc4zG5IdzUQAk4Gw7U2qpZclQHD0mBHiwRMiAEw6ilaz1Pr4GQtnuVMI1rYlk0GwOZQ1pLftGzg0VrSlsbwUNgkBCX83JZnP5rORoo0LZneireQIB8mp+4ugUjp1n93KIUOBVTaRAHLHTkeLOjlBPlWyEvOZ45gjEkB1UsqY2I2uRteWO7kwOYNAP32pILboBeBxCO4gsFuaGfXzFEaXDIdAiDp29+UXpqx+UZjtJSJu0KW6KsOxssdhm41qEhyEikjRAHiJLa6Yr6r//R723vxn1uzSIaVb7jG+gOlKVgKXh+lvBQqLUdTJeysnEY1KM1rk8ivCoklQKfc4AQAYILjjeozJaurPCCGAypla8pN7VSfq3e/UgBiAAo6I6QMPMgSCEBqwCnzFMuvkltEY2+MIgBylD3NlT78WJ4mIIMcNa0KcsDctllX3uK9YD5cGQwvCP9FABgNp8ucqq2gTngP6QLI/N4ZH15+VQYVTBAr3ZKP79olkQSIM/Td/QDY0vUsmbOmcFw9MS8JujoqV8oSvYw/exZ6bl0yOjD0YYeQDrtbQxs/FDfgq6J/JTHo5wz8XbFiwrM8HzqtclQzDT1Gs1bg93WgwQ9F1IunjaUDiH98FQdGa/6gQaGE09VCiGKh4nsYJhq31gdjvy4zvy+NtKmCm/dtVJLTW0vBHBvOBWnACST+pKmAfyVi35f8uFm0p6aHY8eMhEg2nA/4+tqOwcGbssAAAAAElFTkSuQmCC","aspectRatio":0.9948275862068966,"src":"/static/b3d103fc51930412ffaaec7f5bd7940d/bfde3/gatsby_new_hello.png","srcSet":"/static/b3d103fc51930412ffaaec7f5bd7940d/4f634/gatsby_new_hello.png 480w,\n/static/b3d103fc51930412ffaaec7f5bd7940d/bfde3/gatsby_new_hello.png 577w","srcWebp":"/static/b3d103fc51930412ffaaec7f5bd7940d/0ecf5/gatsby_new_hello.webp","srcSetWebp":"/static/b3d103fc51930412ffaaec7f5bd7940d/bc3bf/gatsby_new_hello.webp 480w,\n/static/b3d103fc51930412ffaaec7f5bd7940d/0ecf5/gatsby_new_hello.webp 577w","sizes":"(max-width: 577px) 100vw, 577px"},"resize":{"src":"/static/b3d103fc51930412ffaaec7f5bd7940d/d8210/gatsby_new_hello.png"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"pathSlug":"/post-seven","prev":null,"next":null}}}